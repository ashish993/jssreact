"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveScJssConfig = void 0;
var resolve_1 = __importDefault(require("resolve"));
/**
 * @param {any} config
 */
function resolveScJssConfig(_a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.configPath, configPath = _c === void 0 ? './scjssconfig.json' : _c, _d = _b.configName, configName = _d === void 0 ? 'sitecore' : _d, _e = _b.assert, assert = _e === void 0 ? true : _e;
    return new Promise(function (resolvePromise, rejectPromise) {
        resolve_1.default(configPath, { basedir: process.cwd() }, function (error, jssConfigJson) {
            if (error) {
                if (assert) {
                    console.error('The scjssconfig.json file was missing, and is required. Please set up your connection with `jss setup` and try again.');
                }
                rejectPromise();
            }
            else {
                var json = require(jssConfigJson);
                if (!json[configName]) {
                    console.error("The scjssconfig.json did not contain the " + configName + " configuration.");
                    rejectPromise();
                }
                resolvePromise({
                    sitecore: json[configName],
                });
            }
        });
    });
}
exports.resolveScJssConfig = resolveScJssConfig;
